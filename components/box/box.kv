#:import BlackButton components.black_button.black_button.BlackButton
#:import Clock kivy.clock.Clock

<Box>
    pos_hint: {"center_x": .5, "center_y": .5}
    size_hint: None, None
    orientation: "vertical"
    md_bg_color: self.color
    size: 250, 200
    elevation: 1
    radius: 15


    MDBoxLayout:
        adaptive_height: True
        height: 150
        radius: [15,15,0,0]

        FitImage:
            source: root.image
            radius: [15,15,0,0]

    MDBoxLayout:
        orientation: "vertical"
        spacing: 4
        padding: [0,3,0,0]

        MDLabel:
            text: root.name
            adaptive_size: True
            font_size: 18
            bold: True
            pos_hint: {"center_x": .5}
            theme_text_color: "Custom"

        MDLabel:
            text: root.price
            adaptive_size: True
            font_size: 17
            pos_hint: {"center_x": .5}
            theme_text_color: "Custom"
            text_color: 0,0,0,.7

        Widget:


<BoxOpener>
    orientation: "vertical"
    md_bg_color: 1,1,1,1

    MDFloatLayout:
        id: box_image
        size_hint: 1, None
        height: 230

        FitImage:
            pos_hint: {"center_y": .5}
            source: root.image
#            radius: [25]
        MDFloatLayout:
            id: info_box_1
            size_hint: 1, None
            height: box_image.height
            opacity: 0
            md_bg_color: 0,0,0,.3
            pos_hint: {"top": 1}

            MDLabel:
                adaptive_height: True
                text: root.infos
                halign: "center"
                font_size: 20
                bold: True
                theme_text_color: "Custom"
                text_color: 1,1,1,1
                pos_hint: {"center_y": .5}
        MDFloatLayout:
            id: info_box_2
            size_hint: 1, None
            height: box_image.height
            opacity: 0
            md_bg_color: 0,0,0,.3
            pos_hint: {"top": 1}

            MDLabel:
                adaptive_height: True
                text: root.about
                halign: "center"
                font_size: 20
                bold: True
                theme_text_color: "Custom"
                text_color: 1,1,1,1
                pos_hint: {"center_y": .5}

        MDBoxLayout:
            pos_hint: {"center_x": .9, "center_y":.1}
            size_hint: None, None
            size: 35, 35
#            md_bg_color: 1,0,0,.3
            MDIconButton:
                id: info
#                pos_hint: {"center_x": .5, "center_y": .5}
                icon: "information-variant"
                theme_text_color: "Custom"
                text_color: 1,1,1,1
                on_release: root.info()

                canvas.before:
                    Color:
                        rgba: 0,0,0,.3
                    RoundedRectangle:
                        radius: [25]
                        size: 35, 35
                        pos: self.pos[0] + 6.5, self.pos[1] + 4.5
        MDBoxLayout:
            id: header
            md_bg_color: 0,0,0,.3
            size_hint: 1, None
            height: 50
            padding: [15,0,0,0]
            pos_hint: {"center_x": .5, "top": 1}

            MDLabel:
                text: root.name
#                md_bg_color: 0,0,0,.3
#                bold: True
                adaptive_height: True
                theme_text_color: "Custom"
                text_color: 1,1,1,1
                halign: "center"
                font_size: 30
                pos_hint: {"center_y": .55}

            MDIconButton:
                id: back
                icon: "backburger"
                user_font_size: 30
                theme_text_color: "Custom"
                text_color: 1,1,1,1
    #            text_color: 1,0,0,.7
                on_release: Clock.schedule_once(root.go_back, .25)
    MDBoxLayout:
        id: tickets
        adaptive_height: True
        orientation: "vertical"
        md_bg_color: 1,1,1,1
        size_hint: 1, None
        height: 200

    MDBoxLayout:
        size_hint: 1, None
        height: 40
        md_bg_color: 0,0,1,.2

        MDLabel:
            text: "Total    ===>    "
            halign: "right"
            font_size: 20
            italic: True
            adaptive_height: True
            pos_hint: {"center_y": .55}

        MDLabel:
            id: totals
            text: "0 FCFA"
            bold: True
            font_size: 20
#            md_bg_color: 1,0,0,.3
            adaptive_height: True
            pos_hint: {"center_y": .55}

    MDFloatLayout:
        size_hint: 1, None
        height: 60
#        padding: [0,0,0,15]
        BlackButton:
            pos_hint: {"center_x": .5, "center_y": .5}
            text: "acheter"
            on_release: root.buy()


<Ticket>
    size_hint: 1, None
    height: 40
    padding: [10,0]
    MDBoxLayout:
#        md_bg_color: 1,0,0,.3
        size_hint: 3/9, 1
        MDLabel:
            text: root.name

    MDBoxLayout:
#        md_bg_color: 0,1,0,.3
        size_hint: 3/9, 1
        MDLabel:
            text: root.price
            halign: "center"

    MDFloatLayout:
        size_hint: 3/9, 1
#        height: 25

        MDBoxLayout:
            md_bg_color: 1,1,1,1
            size_hint: 1, None
            height: 30
            padding: [10,0,0,0]
            pos_hint: {"center_x": .5, "center_y": .5}
#            adaptive_height: True
            MDFloatLayout:
                size_hint: None, 1
                width: self.height
                md_bg_color: 1,0,0,.3
                radius: [15]
                MDIconButton:
                    icon: "minus"
                    pos_hint: {"center_x": .5, "center_y": .55}
                    on_release: root.modify(self)

            MDFloatLayout:
                size_hint: 1/3, 1
#                md_bg_color: 1,0,0,.3
                pos_hint: {"center_y": .5}
                MDLabel:
                    id: quantity
    #                md_bg_color: 1,1,1,1
                    adaptive_height: True
                    halign: "center"
                    text: "0"
                    font_size: 18
                    pos_hint: {"center_x": .5, "center_y": .55}

            MDFloatLayout:
                size_hint: None, 1
                width: self.height
                md_bg_color: 0,0,1,.3
                radius: [15]
                MDIconButton:
                    icon: "plus"
                    pos_hint: {"center_x": .5, "center_y": .55}
                    on_release: root.modify(self)